<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Torre de Han√≥i ‚Äî ScalForce</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#140a1a;
      --primary:#ff8a00;
      --primary-700:#cc6d00;
      --accent:#ff8a00;
      --accent-700:#cc6d00;
      --text:#ffffff;
      --muted:#cfc6d9;
      --card:#2b1943;
      --success:#36c38d;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Poppins,system-ui,sans-serif;background:linear-gradient(180deg,#1a0f26,#140a1a);color:var(--text)}
    header{position:sticky;top:0;z-index:10;background:linear-gradient(180deg,rgba(20,10,26,.95),rgba(20,10,26,.6));border-bottom:1px solid rgba(255,255,255,.06)}
    .container{width:min(1200px,92%);margin-inline:auto}
    .nav{display:flex;justify-content:space-between;align-items:center;padding:1rem 0}
    .brand{display:flex;align-items:center;gap:.6rem;font-weight:800;color:var(--accent);font-size:1.3rem}
    .brand img{height:42px; width:auto; display:block; filter:drop-shadow(0 2px 10px rgba(255,138,0,.2))}
    .controls{display:flex;gap:.5rem}
    .controls select,.controls button{background:var(--primary);border:none;color:#1a0f26;padding:.5rem 1rem;border-radius:999px;font-weight:600;cursor:pointer}
    .controls button:hover{background:var(--primary-700)}

    main{padding:2rem 0}
    .board{background:linear-gradient(145deg,var(--card),#1a0f2a);border:3px solid rgba(255,255,255,.06);border-radius:18px;padding:1rem;box-shadow:0 12px 30px rgba(0,0,0,.35)}
    .pegs{display:flex;justify-content:space-around;gap:1rem;padding:2rem 1rem;min-height:260px}
    .peg{flex:1;display:flex;flex-direction:column;align-items:center;position:relative}
    .post{width:12px;height:160px;background:linear-gradient(180deg,#9c9288,#9a9085);border-radius:8px;z-index:1}
    .base{height:12px;background:#706b78;border-radius:6px;width:100%;position:absolute;bottom:16px;left:0}
    .tower{display:flex;flex-direction:column-reverse;align-items:center;gap:6px;position:absolute;bottom:28px;left:50%;transform:translateX(-50%);width:240px;max-width:100%}
    .disk{height:26px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-weight:700;color:#1a0f26;box-shadow:0 6px 12px rgba(0,0,0,.6)}

    .info{display:flex;gap:1rem;flex-wrap:wrap;align-items:center;justify-content:center;margin-top:1rem}
    .badge{background:#170c25;padding:.6rem 1rem;border-radius:999px;font-weight:600}
    .hint{width:100%;text-align:center;color:var(--muted);margin-top:.5rem}

    /* vidas */
    .lives{display:flex;gap:.3rem;align-items:center}
    .heart{font-size:1.3rem;color:red}

    .modal{position:fixed;inset:0;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;z-index:999;visibility:hidden;opacity:0;transition:.3s}
    .modal.active{visibility:visible;opacity:1}
    .modal-box{background:var(--card);padding:1.5rem;border-radius:16px;max-width:400px;width:90%;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,.4)}
    .modal input{margin-top:10px;padding:8px;width:100%;border-radius:8px;border:none}
    .modal button{margin-top:12px;padding:.6rem 1.2rem;border:none;border-radius:999px;background:var(--accent);color:#1a0f26;font-weight:700;cursor:pointer}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <a class="brand">
        <img src="Logo.png" alt="Logo ScalForce" onerror="this.style.display='none'">
        ScalForce
      </a>
      <div class="controls">
        <label for="count">Discos</label>
        <select id="count"><option>3</option><option selected>4</option><option>5</option></select>
        <button id="newGame">Novo jogo</button>
        <button id="undo">Desfazer</button>
        <button id="back">Voltar</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="board">
      <div class="pegs">
        <div class="peg" data-peg="0"><div class="post"></div><div class="tower" data-tower-for="0"></div><div class="base"></div></div>
        <div class="peg" data-peg="1"><div class="post"></div><div class="tower" data-tower-for="1"></div><div class="base"></div></div>
        <div class="peg" data-peg="2"><div class="post"></div><div class="tower" data-tower-for="2"></div><div class="base"></div></div>
      </div>
      <div class="info">
        <div class="badge">Movimentos: <strong id="moves">0</strong></div>
        <div class="badge">M√≠nimo: <strong id="minMoves">0</strong></div>
        <div class="badge lives" id="lives"></div>
        <div class="hint">Responda corretamente √†s perguntas para mover os discos.</div>
      </div>
    </section>
  </main>

  <div class="modal" id="questionModal">
    <div class="modal-box">
      <div id="questionText">Pergunta aqui</div>
      <input type="text" id="answerInput" placeholder="Sua resposta" />
      <button id="submitAnswer">Responder</button>
    </div>
  </div>

  <script>
    const countSelect=document.getElementById('count');
    const newBtn=document.getElementById('newGame');
    const undoBtn=document.getElementById('undo');
    const backBtn=document.getElementById('back');
    const movesEl=document.getElementById('moves');
    const minMovesEl=document.getElementById('minMoves');
    const statusEl=document.getElementById('status');
    const towersEls=[...document.querySelectorAll('[data-tower-for]')];
    const pegEls=[...document.querySelectorAll('.peg')];
    const livesEl=document.getElementById('lives');

    let towers=[[],[],[]];
    let selected=null;
    let moves=0;
    let history=[];
    let solving=false;
    let lives=3;

    const questions = [
  // üßÆ Matem√°tica (10)
  {q:"Quanto √© 5+3?",a:"8"},
  {q:"Quanto √© 9-4?",a:"5"},
  {q:"Quanto √© 6+7?",a:"13"},
  {q:"Quanto √© 10-2?",a:"8"},
  {q:"Quanto √© 4x2?",a:"8"},
  {q:"Quanto √© 15√∑3?",a:"5"},
  {q:"Quanto √© 12-7?",a:"5"},
  {q:"Quanto √© 8+9?",a:"17"},
  {q:"Quanto √© 3x3?",a:"9"},
  {q:"Quanto √© 20-10?",a:"10"},

  // üìö Portugu√™s (10)
  {q:"Qual √© a primeira letra do alfabeto?",a:"A"},
  {q:"Qual √© a √∫ltima letra do alfabeto?",a:"Z"},
  {q:"Qual √© a vogal depois do E?",a:"I"},
  {q:"Quantas s√≠labas tem a palavra CASA?",a:"2"},
  {q:"Escreva a palavra 'SOL' em mai√∫sculas.",a:"SOL"},
  {q:"Qual a consoante depois do B?",a:"C"},
  {q:"Quantas letras tem a palavra ESCOLA?",a:"6"},
  {q:"Qual a primeira letra da palavra AMOR?",a:"A"},
  {q:"Qual a √∫ltima letra da palavra LIVRO?",a:"O"},
  {q:"Qual √© a vogal depois do O?",a:"U"},

  // üî¨ Ci√™ncias (10)
  {q:"Qual astro √© chamado de 'estrela do dia'?",a:"Sol"},
  {q:"Qual planeta chamamos de planeta azul?",a:"Terra"},
  {q:"Quantos olhos tem uma aranha?",a:"8"},
  {q:"Qual parte do corpo usamos para cheirar?",a:"Nariz"},
  {q:"Qual √© o maior √≥rg√£o do corpo humano?",a:"Pele"},
  {q:"Os peixes respiram com o qu√™?",a:"Br√¢nquias"},
  {q:"Qual planeta √© conhecido como planeta vermelho?",a:"Marte"},
  {q:"Qual animal √© conhecido como 'rei da selva'?",a:"Le√£o"},
  {q:"Com qual parte do corpo ouvimos?",a:"Ouvido"},
  {q:"Qual √© o l√≠quido essencial para a vida?",a:"√Ågua"},

  // üèõ Hist√≥ria (5)
  {q:"Quem foi o primeiro presidente do Brasil?",a:"Deodoro"},
  {q:"Em que ano o Brasil foi descoberto?",a:"1500"},
  {q:"Qual era o nome da capital do Brasil antes de Bras√≠lia?",a:"Rio de Janeiro"},
  {q:"Quem foi o imperador que declarou a independ√™ncia do Brasil?",a:"Dom Pedro I"},
  {q:"Em que m√™s comemoramos a Independ√™ncia do Brasil?",a:"Setembro"},

  // üåç Geografia (5)
  {q:"Qual √© o maior continente do mundo?",a:"√Åsia"},
  {q:"Qual √© o maior oceano da Terra?",a:"Pac√≠fico"},
  {q:"Qual √© a capital do Brasil?",a:"Bras√≠lia"},
  {q:"Qual √© o rio mais extenso do Brasil?",a:"Amazonas"},
  {q:"Em qual continente fica o Egito?",a:"√Åfrica"}
];



    const modal=document.getElementById('questionModal');
    const qText=document.getElementById('questionText');
    const answerInput=document.getElementById('answerInput');
    const submitBtn=document.getElementById('submitAnswer');

    function renderLives(){
      livesEl.innerHTML='';
      for(let i=0;i<lives;i++){
        livesEl.innerHTML+='<span class="heart">‚ù§</span>';
      }
    }

    function askQuestion(callback){
      const q=questions[Math.floor(Math.random()*questions.length)];
      qText.textContent=q.q;
      answerInput.value='';
      modal.classList.add('active');
      submitBtn.onclick=()=>{
        if(answerInput.value.trim().toUpperCase()===q.a.toUpperCase()){
          modal.classList.remove('active');
          callback(true);
        }else{
          lives--;
          renderLives();
          modal.classList.remove('active');
          if(lives<=0){statusEl.textContent='Game Over'; disableGame();}
          callback(false);
        }
      }
    }

    function disableGame(){
      pegEls.forEach(p=>p.onclick=null);
    }

    function setup(n){
      solving=false;moves=0;history=[];towers=[[],[],[]];lives=3;renderLives();
      for(let i=n;i>=1;i--)towers[0].push(i);
      render();
      minMovesEl.textContent=Math.pow(2,n)-1;
      movesEl.textContent=moves;
      statusEl.textContent='Aguardando';
    }

    function render(){
      towersEls.forEach((el,idx)=>{
        el.innerHTML='';
        towers[idx].forEach(disk=>{
          const d=document.createElement('div');
          d.className='disk';
          d.dataset.size=disk;
          const max=parseInt(countSelect.value,10);
          const pct=30+(disk-1)/(max-1||1)*70;
          d.style.width=pct+'%';
          d.style.background=`linear-gradient(90deg, var(--accent), var(--accent-700))`;
          el.appendChild(d);
        });
      });
      pegEls.forEach(peg=>{peg.onclick=()=>handlePegClick(parseInt(peg.dataset.peg,10));});
    }

    function handlePegClick(pegIdx){
      if(solving||lives<=0)return;
      const peg=towers[pegIdx];
      const top=peg[peg.length-1];
      if(selected){
        const from=selected.peg;
        if(from===pegIdx){selected=null;statusEl.textContent='Cancelado';return;}
        if(!top||top>selected.disk){
          askQuestion(ok=>{if(ok)doMove(from,pegIdx);selected=null;});
        }else{statusEl.textContent='Movimento inv√°lido';selected=null;}
      }else{
        if(top){selected={peg:pegIdx,disk:top};statusEl.textContent=`Selecionado disco ${top}`;}else{statusEl.textContent='Pino vazio';}
      }
    }

    function doMove(from,to,record=true){
      const disk=towers[from].pop();
      towers[to].push(disk);
      moves++;movesEl.textContent=moves;
      if(record)history.push({from,to,disk});
      render();checkWin();
    }

    function checkWin(){
      const n=parseInt(countSelect.value,10);
      if(towers[2].length===n){statusEl.textContent='Voc√™ venceu! üéâ';}
    }

    function undo(){
      if(history.length===0||solving)return;
      const last=history.pop();
      towers[last.to].pop();
      towers[last.from].push(last.disk);
      moves=Math.max(0,moves-1);
      movesEl.textContent=moves;
      render();statusEl.textContent='Desfeito';
    }

    backBtn.addEventListener('click',()=>{
      window.location.href='../ScalForce.html';
    });

    newBtn.addEventListener('click',()=>setup(parseInt(countSelect.value,10)));
    undoBtn.addEventListener('click',undo);
    countSelect.addEventListener('change',()=>setup(parseInt(countSelect.value,10)));

    setup(parseInt(countSelect.value,10));
  </script>
</body>
</html>
